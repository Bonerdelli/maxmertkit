<div id="main-content" class="-container">
	<h1>Popup</h1>


	<div class="-row">
		<div class="-col4">
			<h3>HTML Popup</h3>
			<p>
				Use widgets <code>-dropdown</code> or <code>-tooltip</code>
			</p>
			<p>
				To set animation to the dialog window add animation name: <code>-fadein--</code>, <code>-fall--</code>, <code>-fliphorizontal--</code>, <code>-flopvertical--</code>, <code>-slidein--</code>, <code>-scalein--</code>, <code>-newspaper--</code>.
			</p>
		</div>
		<div class="-col4">
			<h3>HTML Button</h3>
			<p>
				Add data attributes to any widget <code>data-toggle="popup"</code> and <code>data-target="#popup1"</code>. The plugin will find such buttons automatically. In <code>data-target</code> you can set classes or ids.
			</p>
		</div>
		<div class="-col4">
			<h3>Coffescript</h3>
			<p>Simple way:</p>
			<p><pre hljs class="prettyprint lang-coffeescript">el.popup()</pre></p><p>More complicated:</p>
			<p><pre hljs class="prettyprint lang-coffeescript">el.popup
	beforeactive: ->
		# Get popup class instance
		popup = @data['kitPopup']
		# Set new content
		popup.dialog.innerHTML = "Set content here"

	onactive: ->
		# Add active class to the button
		@_addClass '_active_'

	ondeactive: ->
		# Remove active class to the button
		@_removeClass '_active_'</pre></p>
		</div>
	</div>



	<div class="-row example-block">

	<div class="-col12 view">
		<a class="-btn -primary- btn-popup-demo" data-toggle="popup" data-target="#popup-demo">corner</a>
		<a class="-btn -error- btn-popup-demo" data-toggle="popup" data-target="#popup-demo2">door</a>
		<a class="-btn -primary- btn-popup-demo" data-toggle="popup" data-target="#popup-demo3">fadein</a>
		<a class="-btn -error- btn-popup-demo" data-toggle="popup" data-target="#popup-demo4">fall</a>
		<a class="-btn -primary- btn-popup-demo" data-toggle="popup" data-target="#popup-demo5">fliphorizontal</a>
		<a class="-btn -error- btn-popup-demo" data-toggle="popup" data-target="#popup-demo6">flipvertical</a>
		<a class="-btn -primary- btn-popup-demo" data-toggle="popup" data-target="#popup-demo7">hugeinc</a>
		<a class="-btn -error- btn-popup-demo" data-toggle="popup" data-target="#popup-demo8">newspaper</a>
		<a class="-btn -primary- btn-popup-demo" data-toggle="popup" data-target="#popup-demo9">scale</a>
		<a class="-btn -primary- btn-popup-demo" data-toggle="popup" data-target="#popup-demo11">slidedown</a>
	</div>

	<div class="-col12 view">
		<a class="-btn -primary- btn-popup-demo" data-toggle="popup" data-target="#popup-demo13">Top</a>
		<a class="-btn -primary- btn-popup-demo-left" data-toggle="popup" data-target="#popup-demo14">Left</a>
		<a class="-btn -primary- btn-popup-demo-right" data-toggle="popup" data-target="#popup-demo15">Right</a>
		<a class="-btn -primary- btn-popup-demo-bottom" data-toggle="popup" data-target="#popup-demo16">Bottom</a>
		<a class="-btn -primary- btn-popup-demo-bottom-right" data-toggle="popup" data-target="#popup-demo17">Bottom right</a>
		<a class="-btn -primary- btn-popup-demo-top-left" data-toggle="popup" data-target="#popup-demo18">Top left</a>
	</div>


	<div class="-col12 example"><pre hljs class="prettyprint lang-html"><a class="-btn -primary- btn-popup-demo" data-toggle="popup" data-target="#popup-demo">Open popup</a>
<a class="-btn -error- btn-popup-demo" data-toggle="popup" data-target="#popup-demo2">Open popup</a>
...
</pre></div>

<div class="-col12 example"><pre hljs class="prettyprint lang-html"><div id="popup-demo" class="-drop _top_ -primary- -fliphorizontal-- -elastic--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo2" class="-drop _top_ -error- -scalein-- -elastic--">
	<i class="-arrow"></i>
	<div class="-content">
		Fall popup
	</div>
</div>
...
</pre></div>

<div class="-col12 example"><pre hljs class="prettyprint lang-coffeescript">document.querySelector('.btn-popup-demo').popup
	beforeactive: ->
		popup = @data['kitPopup']
		popup.dialog.innerHTML = "Popup #{popup._id} with dynamic content<br>Random number #{Math.random()}"

	onactive: ->
		@_addClass '_active_'

	ondeactive: ->
		@_removeClass '_active_'


document.querySelector('.btn-popup-demo-left').popup
	position:
		vertical: 'middle'
		horizontal: 'left'
	beforeactive: ->
		popup = @data['kitPopup']
		popup.dialog.innerHTML = "Popup #{popup._id} with dynamic content<br>Random number #{Math.random()}"

	onactive: ->
		@_addClass '_active_'

	ondeactive: ->
		@_removeClass '_active_'

...
</pre></div>


</div>


<h2>Properties</h2>

<table class="-table _horizontal_">
	<thead>
		<tr>
			<th>Name</th>
			<th>Default</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>target</td>
			<td><i> @el.getAttribute( 'data-target' ) or null</i></td>
			<td>
				Find element with this selector and work with it as a popup window.
			</td>
		</tr>
		<tr>
			<td>toggle</td>
			<td><i>@el.getAttribute( 'data-toggle' ) or 'popup'</i></td>
			<td>
				Set toggle type.
			</td>
		</tr>
		<tr>
			<td>dialog</td>
			<td><i>@el.getAttribute( 'data-dialog' ) or ".-content"</i></td>
			<td>
				Selector to find dialog blog inside popup.
			</td>
		</tr>
		<tr>
			<td>event</td>
			<td><i>@el.getAttribute( 'data-event' ) or "click"</i></td>
			<td>
				This event will be used to open popup.</code>
			</td>
		</tr>
		<tr>
			<td>eventClose</td>
			<td><i>@el.getAttribute( 'data-event-close' ) or "click"</i></td>
			<td>
				Event for closer element to close popup. Closer element should be anywhere in the DOM with attribute <code>data-dismiss="target-selector"</code>.
			</td>
		</tr>
		<tr>
			<td>autoOpen</td>
			<td><i>@el.getAttribute('data-autoopen') or no</i></td>
			<td>
				Open popup after initialization.
			</td>
		</tr>
		<tr>
			<td>position</td>
			<td><i>{
				vertical: @el.getAttribute( 'data-position-vertical' ) or 'top',
				horizontal: @el.getAttribute( 'data-position-horizontal' ) or 'center'
			}</i></td>
			<td>
				Popup position relative to the button.<br>
				vertical: <code>'top'</code> / <code>'middle'</code> / <code>'bottom'</code><br>
				horizontal: <code>'left'</code> / <code>'center'</code> / <code>'right'</code>
			</td>
		</tr>
		<tr>
			<td>offset</td>
			<td>
				<i>
					horizontal: @el.getAttribute( 'data-offset-horizontal' ) or 0<br>
					vertical: @el.getAttribute( 'data-offset-vertical' ) or 0
				</i>
			</td>
			<td>
				In <code>px</code>. Offset relative to <code>position</code>.
			</td>
		</tr>
		<tr>
			<td>closeUnfocus</td>
			<td>
				<i>
					@el.getAttribute( 'data-close-unfocus' ) or no
				</i>
			</td>
			<td>
				Close popup if click outside of it.
			</td>
		</tr>
		<tr>
			<td>closeOnResize</td>
			<td>
				<i>
					@el.getAttribute( 'data-close-resize' ) or yes
				</i>
			</td>
			<td>
				Close popup when browser window resizing.
			</td>
		</tr>
		<tr>
			<td>selfish</td>
			<td>
				<i>
					@el.getAttribute( 'data-selfish' ) or yes
				</i>
			</td>
			<td>
				Close all popups when opens this one.
			</td>
		</tr>
	</tbody>
</table>


<h2>Methods</h2>

<table class="-table _horizontal_">
	<thead>
		<tr>
			<th>Method</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><b>open</b></td>
			<td>
				<p>Open popup.</p>
			</td>
		</tr>
		<tr>
			<td><b>close</b></td>
			<td>
				<p>Close popup.</p>
			</td>
		</tr>
		<tr>
			<td><b>enable</b></td>
			<td>
				<p>Start listening to the events.</p>
			</td>
		</tr>
		<tr>
			<td><b>disable</b></td>
			<td>
				<p>Stop listening to the events. Popup will stay in current status (opened or closed) and will not work anymore.</p>
			</td>
		</tr>
		<tr>
			<td><b>setPosition</b></td>
			<td>
				<p>Refresh position of the popup relative to the button.</p>
			</td>
		</tr>
	</tbody>
</table>


<h2>Events</h2>

<blockquote class="-primary-">
	Inside each method to get button use <code>@</code> or <code>this</code> in js. Class instance always stores in data attribute of the button element <code>@data['kitPopup']</code> or <code>this.data['kitPopup']</code> in js. To get popup window element do <code>@data['kitPopup'].target</code>.
</blockquote>

<table class="-table _horizontal_">
	<thead>
		<tr>
			<th>Method</th>
			<th>Description</th>
		</tr>
	</thead>
		<tr>
			<td><b>beforeactive</b></td>
			<td><i>undefined</i></td>
			<td>
				<p>Set a function to call it before popup opens. If it returns <code>deferred.promise()</code>, then popup will not open till <code>deferred.resolve()</code>, and woun't open if <code>deferred.reject()</code>. You can just get data with ajax for popup.</p>
				<p language="coffeescript"><pre hljs class="prettyprint lang-coffeescript">document.querySelector('.btn-popup').popup
	beforeactive: ->
		d = $.Deferred()

		console.log @
		# The button element will be in the log
		# so you can add or remove classes easily
		# for example to disable button while getting data for popup window

		console.log @data['kitPopup']
		# The instance of Modal class will in log
		# so to get popup window element you need to do
		popup = @data['kitPopup'].target

		# To get popup element do
		console.log popup.target

		# To get popup dialog element do
		console.log popup.dialog

		# Do something here before open window
		# in this case it will open popup window after 2 seconds
		setTimeout ->
			d.resolve()
		, 2000
		# End of your code

		d.promise()
</pre></p>
			</td>
		</tr>


		<tr>
			<td><b>onactive</b></td>
			<td>
				<p>Set a function to call it after popup opens.</p>
			</td>
		</tr>

		<tr>
			<td><b>failactive</b></td>
			<td>
				<p>Set a function to call it if activation failed.</p>
			</td>
		</tr>

		<tr>
			<td><b>beforedeactive</b></td>
			<td>
				<p>Call this function before popup closes.</p>
			</td>
		</tr>

		<tr>
			<td><b>ondeactive</b></td>
			<td>
				<p>Call this function after popup closes.</p>
			</td>
		</tr>

		<tr>
			<td><b>faildeactive</b></td>
			<td>
				<p>Set a function to call it if deactivation failed.</p>
			</td>
		</tr>
	</tbody>
</table>


</div>


<div id="popup-demo" class="-drop _top_ -primary- -corner--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo2" class="-drop _top_ -primary- -door--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo3" class="-drop _top_ -error- -fadein--">
	<i class="-arrow"></i>
	<div class="-content">
		Fall popup
	</div>
</div>

<div id="popup-demo4" class="-drop _top_ -error- -fall--">
	<i class="-arrow"></i>
	<div class="-content">
		Fall popup
	</div>
</div>

<div id="popup-demo5" class="-drop _top_ -error- -fliphorizontal--">
	<i class="-arrow"></i>
	<div class="-content">
		Fall popup
	</div>
</div>

<div id="popup-demo6" class="-drop _top_ -error- -flipvertical--">
	<i class="-arrow"></i>
	<div class="-content">
		Fall popup
	</div>
</div>

<div id="popup-demo7" class="-drop _top_ -error- -hugeinc--">
	<i class="-arrow"></i>
	<div class="-content">
		Fall popup
	</div>
</div>

<div id="popup-demo8" class="-drop _top_ -error- -newspaper--">
	<i class="-arrow"></i>
	<div class="-content">
		Fall popup
	</div>
</div>

<div id="popup-demo9" class="-drop _top_ -error- -scale--">
	<i class="-arrow"></i>
	<div class="-content">
		Fall popup
	</div>
</div>

<div id="popup-demo10" class="-drop _top_ -error- -blur--">
	<i class="-arrow"></i>
	<div class="-content">
		Fall popup
	</div>
</div>

<div id="popup-demo11" class="-drop _top_ -primary- -slidedown--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo12" class="-drop _top_ -primary- -slidein--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo13" class="-drop _top_ -primary- -fadein--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo14" class="-drop _left_ -primary- -fadein--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo15" class="-drop _right_ -primary- -fadein--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo16" class="-drop _right_ _top_ -primary- -fadein--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo17" class="-drop _right_ _top_ -primary- -fadein--">
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>

<div id="popup-demo18" class="-drop _left_ _bottom_ -primary- -fadein--" popup>
	<i class="-arrow"></i>
	<div class="-content">
		Flip horizontal popup
	</div>
</div>
