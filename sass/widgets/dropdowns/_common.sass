@mixin dropdowns-theme-setter($i)

	.#{$header-class-name}
		background-color: nth($themes-background-colors, $i)
		@if nth($themes, $i) == "-default-"
			border-color: lighten(nth($themes-background-colors, $i), 5%)
		@else
			border-color: darken(nth($themes-background-colors, $i), 7%)
			color: nth($themes-white-colors, $i)

	.#{$arrow-class-name}
		@include triangle($dropdown-arrow-size, nth($themes-background-colors, $i), up)

	&.#{$mod-bottom}, &.#{$mod-top}
		&:before
			@include background-image(linear-gradient(to left, transparent 0%, nth($themes-background-colors, $i) 50%, transparent 100%))

	&.#{$mod-left}, &.#{$mod-right}
		&:before
			@include background-image(linear-gradient(to bottom, transparent 0%, nth($themes-background-colors, $i) 50%, transparent 100%))

	&.#{$mod-top}
		.#{$arrow-class-name}
			@include triangle($dropdown-arrow-size, nth($themes-background-colors, $i), down)

	&.#{$mod-left}
		.#{$arrow-class-name}
			@include triangle($dropdown-arrow-size, nth($themes-background-colors, $i), right)

	&.#{$mod-right}
		.#{$arrow-class-name}
			@include triangle($dropdown-arrow-size, nth($themes-background-colors, $i), left)


@include exports("dropdowns/common")

	.#{$dropdown-class}
		display: none
		position: absolute
		top: 100%
		left: 0
		z-index: $dropdown-z-index
		border-width: $dropdown-border-width
		border-style: $dropdown-border-style
		border-color: transparent

		box-shadow: $dropdown-shadow

		background-color: nth($themes-background-light-colors, index($themes, "-default-"))
		border-color: lighten(nth($themes-background-colors, index($themes, "-default-")), 5%)

		.#{$content-class-name}, .#{$header-class-name}
			padding: $dropdown-content-padding-vertical $dropdown-content-padding-horizontal
			position: relative

		.#{$header-class-name}
			border-radius: $dropdown-border-radius $dropdown-border-radius 0 0
			top: -$dropdown-border-radius

		.#{$arrow-class-name}
			position: absolute
			bottom: 100%
			left: 50%
			margin-left: -$dropdown-arrow-size / 2
		
		&:before
			content: " "
			display: block
			position: absolute
			top: inherit
			bottom: 100%
			height: $dropdown-border-width
			width: 100%

		&.#{$mod-left}
			// left: inherit
			// right: 100%
			// top: 0
			@include transform-origin(right center)
			&:before
				content: " "
				display: block
				position: absolute
				top: 0
				left: 100%
				right: auto
				height: 100%
				width: $dropdown-border-width

			.#{$arrow-class-name}
				top: 50%
				right: auto
				left: 100%
				margin-top: -$dropdown-arrow-size / 2
				margin-left: 0


		&.#{$mod-right}
			// right: inherit
			// left: 100%
			// top: 0
			@include transform-origin(left center)
			&:before
				content: " "
				display: block
				position: absolute
				top: 0
				left: auto
				right: 100%
				height: 100%
				width: $dropdown-border-width

			.#{$arrow-class-name}
				// bottom: inherit
				top: 50%
				left: auto
				right: 100%
				margin-top: -$dropdown-arrow-size / 2
				margin-left: 0

		


		&.#{$mod-bottom}
			@include transform-origin(center top)
			&:before
				bottom: 100%
				top: auto
				height: $dropdown-border-width
				width: 100%

			&.#{$mod-left}
				@include transform-origin(right top)
				&:before
					display: none
				.#{$arrow-class-name}
					top: auto
					bottom: 100%
					left: 100%
					@include transform(rotate(-45deg))
					margin-bottom: -$dropdown-arrow-size / 2
					margin-left: -$dropdown-arrow-size / 2

			&.#{$mod-right}
				@include transform-origin(left top)
				&:before
					display: none
				.#{$arrow-class-name}
					top: auto
					bottom: 100%
					left: auto
					right: 100%
					@include transform(rotate(45deg))
					margin-top: auto
					margin-bottom: -$dropdown-arrow-size / 2
					margin-left: auto
					margin-right: -$dropdown-arrow-size / 2

		
		&.#{$mod-top}
			// top: inherit
			// bottom: 100%
			@include transform-origin(center bottom)
			&:before
				content: " "
				display: block
				position: absolute
				top: 100%
				height: $dropdown-border-width
				width: 100%

			.#{$arrow-class-name}
				top: 100%
				left: 50%
				margin-left: -$dropdown-arrow-size / 2


			&.#{$mod-left}
				@include transform-origin(right bottom)
				&:before
					display: none
				.#{$arrow-class-name}
					top: 100%
					left: 100%
					@include transform(rotate(45deg))
					margin-top: -$dropdown-arrow-size / 2
					margin-left: -$dropdown-arrow-size / 2

			&.#{$mod-right}
				@include transform-origin(left bottom)
				&:before
					display: none
				.#{$arrow-class-name}
					top: 100%
					left: auto
					right: 100%
					@include transform(rotate(-45deg))
					margin-top: -$dropdown-arrow-size / 2
					margin-left: auto
					margin-right: -$dropdown-arrow-size / 2


		&.#{$mod-active}
			display: inline-block
			@extend .#{$animation-start-class}





		@each $theme in $themes
			$i: index($themes, $theme)
			
			@if $theme == "-default-"
				@include dropdowns-theme-setter($i)
				&.#{$theme}
					@include dropdowns-theme-setter($i)
			@else
				&.#{$theme}
					@include dropdowns-theme-setter($i)